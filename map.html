<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sail Analyzer - Playback</title>
    <!-- Externe Bibliotheek CSS -->
    <link rel="stylesheet" href="./css/leaflet.css">
    <link rel="stylesheet" href="https://unpkg.com/@geoman-io/leaflet-geoman-free@2.13.0/dist/leaflet-geoman.css" />

    <!-- Jouw Eigen CSS -->
    <link rel="stylesheet" href="./css/layout.css?v=2"> <!-- NIEUW: Algemene layout -->
    <link rel="stylesheet" href="./css/playback-controls.css"> <!-- Je bestaande, eventueel hernoemde bestand -->
    <link rel="stylesheet" href="./css/chart.css?v=2"> <!-- NIEUW: Specifiek voor de grafiek -->

</head>
<body>
    <div id="mapid"></div> 
    <!-- --- BEGIN GEWIJZIGDE STRUCTUUR --- -->
    <div id="chartArea"> 
        <div id="resizeHandle">
            <div class="grab-area"></div> <!-- Het sleepbare gedeelte -->
            <button id="toggleChartBtn" title="Toggle Chart Visibility">
                <!-- SVG-icoon voor 'pijltje omlaag' -->
                <svg class="toggle-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
                    <!-- Let op: class="toggle-icon" is toegevoegd en fill="currentColor" is verwijderd -->
                    <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                </svg>
            </button>
        </div>
        <div id="chartContainer">
            <!-- De dropdown is nu een direct kind-element -->
            <select id="chartVariableSelect">
                <option value="speed">Speed (knots)</option>
                <option value="heading">Heading (Â°)</option>
            </select>
            
            <canvas id="syncedChart"></canvas>
        </div>
    </div>
    <script src="./js/leaflet.js"></script>
    <script src="https://unpkg.com/dexie@latest/dist/dexie.js"></script>
    <script src="./js/db-config.js?v=1"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@^2/dist/chartjs-plugin-annotation.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/date-fns/4.1.0/cdn.min.js"></script> 
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@^2/dist/chartjs-adapter-date-fns.bundle.js"></script>
    <script src="./js/leaflet.geometryutil.js"></script>
    <script src="./js/leaflet.trackplayback.js?v=4"></script>
    <script src="./js/control.trackplayback_new_bar.js?v=2"></script> 
    <script src="./js/leaflet.segmentanalysis.js?v=3"></script>
    <script src="./js/control.segmentanalysis.js?v=2"></script>
    <script src="https://unpkg.com/@geoman-io/leaflet-geoman-free@2.13.0/dist/leaflet-geoman.min.js"></script>

    <!-- Hoofdscript voor kaart en playback initialisatie -->
    <script src="./js/main-playback.js?v=2"></script>
</body>
</html>